"use strict";(self.webpackChunkheng_docs=self.webpackChunkheng_docs||[]).push([[9419],{5737:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var o=n(4848),r=n(8453);const i={sidebar_position:6},a="Mid-level (III): WebSocket API",s={id:"tutorial-basics/deploy_your_site",title:"Mid-level (III): WebSocket API",description:"I.Preface",source:"@site/i18n/zh-Hans/docusaurus-plugin-content-docs/current/tutorial-basics/deploy_your_site.md",sourceDirName:"tutorial-basics",slug:"/tutorial-basics/deploy_your_site",permalink:"/heng-docs/zh-Hans/docs/tutorial-basics/deploy_your_site",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/tutorial-basics/deploy_your_site.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"tutorialSidebar",previous:{title:"Mid-level (II): Python API",permalink:"/heng-docs/zh-Hans/docs/tutorial-basics/python_api"},next:{title:"Advanced-level (I): UI Usage",permalink:"/heng-docs/zh-Hans/docs/tutorial-basics/quick_start_two"}},d={},c=[{value:"I.Preface",id:"ipreface",level:2},{value:"II.Preparation Work",id:"iipreparation-work",level:2},{value:"2.1 Hardware",id:"21-hardware",level:3},{value:"2.2 Software",id:"22-software",level:3},{value:"III.Notes",id:"iiinotes",level:2},{value:"IV.API Usage Process",id:"ivapi-usage-process",level:2},{value:"4.1 Browser debugging of API",id:"41-browser-debugging-of-api",level:3},{value:"4.2 More API Development Materials",id:"42-more-api-development-materials",level:3},{value:"V.Browser Debugging of API",id:"vbrowser-debugging-of-api",level:2},{value:"5.1 Connect to Sparky",id:"51-connect-to-sparky",level:3},{value:"5.2 \u6d4b\u8bd5\u9065\u63a7\u6b65\u6001",id:"52-\u6d4b\u8bd5\u9065\u63a7\u6b65\u6001",level:3},{value:"Test 1: Switch modes and restore normal posture",id:"test-1-switch-modes-and-restore-normal-posture",level:4},{value:"Test 2: Test gait movement",id:"test-2-test-gait-movement",level:4},{value:"5.3 Record and Playback",id:"53-record-and-playback",level:3},{value:"5.4 Play Keyframes",id:"54-play-keyframes",level:3},{value:"5.5 Handling method of abnormal situation",id:"55-handling-method-of-abnormal-situation",level:3},{value:"VI.More API development materials",id:"vimore-api-development-materials",level:2},{value:"6.1 Mode switching and body posture reset",id:"61-mode-switching-and-body-posture-reset",level:3},{value:"6.1.1 \u6a21\u5f0f\u5207\u6362\u6307\u4ee4\u8868",id:"611-\u6a21\u5f0f\u5207\u6362\u6307\u4ee4\u8868",level:4},{value:"6.1.2 Usage description of mode order",id:"612-usage-description-of-mode-order",level:4},{value:"6.2 \u9065\u63a7\u6a21\u5f0f",id:"62-\u9065\u63a7\u6a21\u5f0f",level:3},{value:"6.2.1  Walking remote control",id:"621--walking-remote-control",level:4},{value:"6.2.2 Quick Action Recording",id:"622-quick-action-recording",level:4},{value:"6.3 Teaching demonstration mode",id:"63-teaching-demonstration-mode",level:3},{value:"6.3.1 Command list/motor torque configuration",id:"631-command-listmotor-torque-configuration",level:4},{value:"6.3.2 Action playback",id:"632-action-playback",level:4},{value:"6.4 Edit mode",id:"64-edit-mode",level:3},{value:"6.4.1 Keyframe Example\u200b",id:"641-keyframe-example",level:4},{value:"6.4.2 Play keyframes",id:"642-play-keyframes",level:4},{value:"6.5 Using Python to Control Robot Motion",id:"65-using-python-to-control-robot-motion",level:3},{value:"Jupyter notebook test",id:"jupyter-notebook-test",level:3},{value:"6.6 Graphical GUI controls the motion of Sparky in various dimensions.",id:"66-graphical-gui-controls-the-motion-of-sparky-in-various-dimensions",level:3},{value:"6.7 Graphic\xa0GUI recording and playing actions",id:"67-graphicgui-recording-and-playing-actions",level:3},{value:"6.8 Visualize and generate waveform curves to control the rhythmic movement of Sparky in all degrees of freedom.",id:"68-visualize-and-generate-waveform-curves-to-control-the-rhythmic-movement-of-sparky-in-all-degrees-of-freedom",level:3},{value:"6.6 MJPEG Video Transmission",id:"66-mjpeg-video-transmission",level:3}];function l(e){const t={a:"a",admonition:"admonition",blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.h1,{id:"mid-level-iii-websocket-api",children:"Mid-level (III): WebSocket API"}),"\n",(0,o.jsx)(t.h2,{id:"ipreface",children:"I.Preface"}),"\n",(0,o.jsx)(t.p,{children:"Before reading this document, please familiarize yourself with the relevant documentation of Sparky to learn its basic usage. HENGBOT assumes that you have a certain foundation in programming and development, and are familiar with the Python language and interface calling. Please note that this document does not provide detailed explanations or popularization of professional terminology. Let's follow the guidance in the document together and learn how to debug and develop Sparky's API interface to achieve more innovative and interesting features."}),"\n",(0,o.jsx)(t.h2,{id:"iipreparation-work",children:"II.Preparation Work"}),"\n",(0,o.jsx)(t.p,{children:"We need to do some preparation work before use to make the follow-up use easier."}),"\n",(0,o.jsx)(t.h3,{id:"21-hardware",children:"2.1 Hardware"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"A Sparky updated to the latest mirror system (Version: hzwl831-m2dock-20240621)"}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"app/sparky",src:n(3601).A+"",width:"5616",height:"3744"})}),"\n",(0,o.jsx)(t.h3,{id:"22-software",children:"2.2 Software"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["Debugging tools","\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["Webscoket debugging website:",(0,o.jsx)(t.a,{href:"http://wstool.js.org/",children:"http://wstool.js.org/"})]}),"\n",(0,o.jsxs)(t.li,{children:["Json format online conversion tool:",(0,o.jsx)(t.a,{href:"https://www.sojson.com/",children:"https://www.sojson.com/"})]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["Operating environment","\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"Sparky: By default, the network is connected and has obtained an IP address on the screen\uff08\u4f8b\u5982\u201cIP:192.168.8.232\u201d \uff09"}),"\n",(0,o.jsx)(t.li,{children:"API test: By default, API test can only be carried out when the body is in remote control mode."}),"\n",(0,o.jsx)(t.li,{children:"PC: Python environment installed"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"The above environment construction will not be explained in detail in this document. If necessary, please refer to the following documents."}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsxs)(t.p,{children:["Meet Sparky: User Guide\uff1a",(0,o.jsx)(t.a,{href:"/heng-docs/zh-Hans/docs/tutorial-basics/quick_start_guide",children:"Unboxing: Entry-level Configuration and Usage"})]}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"iiinotes",children:"III.Notes"}),"\n",(0,o.jsx)(t.p,{children:"In order to better use the API, you need to understand some physical definitions on Sparky's body."}),"\n",(0,o.jsxs)(t.table,{children:[(0,o.jsx)(t.thead,{children:(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.th,{children:"Reference pictures"}),(0,o.jsx)(t.th,{})]})}),(0,o.jsx)(t.tbody,{children:(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:(0,o.jsx)(t.img,{alt:"api_move",src:n(8425).A+"",width:"800",height:"353"})}),(0,o.jsx)(t.td,{children:(0,o.jsx)(t.img,{alt:"api_head",src:n(8656).A+"",width:"2146",height:"663"})})]})})]}),"\n",(0,o.jsxs)(t.table,{children:[(0,o.jsx)(t.thead,{children:(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.th,{}),(0,o.jsx)(t.th,{children:"Physical definitions on body"}),(0,o.jsx)(t.th,{})]})}),(0,o.jsxs)(t.tbody,{children:[(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:(0,o.jsx)(t.strong,{children:"Remote control"})}),(0,o.jsx)(t.td,{children:"move_x"}),(0,o.jsx)(t.td,{children:"When ove-x=1/-1, the maximum forward and backward speed is 0.28m/s"})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{}),(0,o.jsx)(t.td,{children:"move_y"}),(0,o.jsx)(t.td,{children:"When move_y=1/-1, the maximum forward and backward speed is 0.3m/s"})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{}),(0,o.jsx)(t.td,{children:"move_w"}),(0,o.jsx)(t.td,{children:"When move_w=1, the maximum z-axis rotation speed is 2rad/s"})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{}),(0,o.jsx)(t.td,{children:"head_pitch"}),(0,o.jsx)(t.td,{children:"The range of motion is -1 ~ 1 rad."})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{}),(0,o.jsx)(t.td,{children:"head_yaw"}),(0,o.jsx)(t.td,{children:"The range of motion is -1 ~ 1 rad."})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{}),(0,o.jsx)(t.td,{children:"tranx"}),(0,o.jsx)(t.td,{children:"When tranx is in -1~1, the range of motion is 20mm forward and backward"})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{}),(0,o.jsx)(t.td,{children:"trany"}),(0,o.jsx)(t.td,{children:"When trany is in -1~1, the range of motion is 20mm left and right"})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{}),(0,o.jsx)(t.td,{children:"tranz"}),(0,o.jsx)(t.td,{children:"When tranz is in -1~1, the range of motion is 30mm up and down"})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:(0,o.jsx)(t.strong,{children:"Keyframe"})}),(0,o.jsx)(t.td,{children:"roll\u3001pitch\u3001yaw"}),(0,o.jsx)(t.td,{children:"Use the radian system, ranging from -1 to 1."})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{}),(0,o.jsx)(t.td,{children:"body"}),(0,o.jsx)(t.td,{children:'Tran-z in "body" is the unit of standing height of the body in millimeters'})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{}),(0,o.jsx)(t.td,{children:"Foot position"}),(0,o.jsx)(t.td,{children:"All units are in millimeters and the coordinate is in Cartesian coordinate system."})]})]})]}),"\n",(0,o.jsx)(t.h2,{id:"ivapi-usage-process",children:"IV.API Usage Process"}),"\n",(0,o.jsx)(t.p,{children:"Before enabling API usage, we need to learn how to implement API function through two main methods; They are respectively browser debugging and Python development. The following is the detailed usage process, which will guide you to start the journey of API experience!"}),"\n",(0,o.jsx)(t.h3,{id:"41-browser-debugging-of-api",children:"4.1 Browser debugging of API"}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsx)(t.li,{children:"Preparation stage: Prepare the software and hardware before use according to the preparation work."}),"\n",(0,o.jsx)(t.li,{children:"Verify connection: First, confirm whether Sparky can be connected normally."}),"\n",(0,o.jsx)(t.li,{children:"Test remote control gait: Test whether Sparky can give instructions and execute them."}),"\n",(0,o.jsx)(t.li,{children:"Record and playback: Experience the recording function in teaching demonstration mode, whether the preset recording script can be played."}),"\n",(0,o.jsx)(t.li,{}),"\n",(0,o.jsx)(t.li,{children:"Play keyframes: Experience the keyframe function in Edit Mode, whether the preset keyframes can be played."}),"\n",(0,o.jsx)(t.li,{children:"Abnormal State Q&A: Learn how to restore normal use of Sparky when an abnormal state occurs."}),"\n"]}),"\n",(0,o.jsx)(t.h3,{id:"42-more-api-development-materials",children:"4.2 More API Development Materials"}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsx)(t.li,{children:"Detailed interpretation of API development materials: including mode switching and body posture reset, remote control mode, teaching demonstration mode, and edit mode."}),"\n",(0,o.jsx)(t.li,{children:"Python API tutorial"}),"\n",(0,o.jsx)(t.li,{children:"Image transmission in MJPEG"}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"vbrowser-debugging-of-api",children:"V.Browser Debugging of API"}),"\n",(0,o.jsx)(t.p,{children:"Most API functions are related to the mode of the Sparky and need to be used in a specific mode. So when we establish a connection with Sparky, we need to switch modes first before using specific functions."}),"\n",(0,o.jsx)(t.h3,{id:"51-connect-to-sparky",children:"5.1 Connect to Sparky"}),"\n",(0,o.jsx)(t.p,{children:"We have already connected Sparky to the network and obtained an IP address in the preparation work, Here, take IP: 192.168.8.74 as an example."}),"\n",(0,o.jsx)(t.admonition,{title:"TAKE CARE",type:"danger",children:(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.strong,{children:"Note"}),": In case some users open it as ",(0,o.jsx)(t.a,{href:"https://wstool.js.org/",children:"https://wstool.js.org/"}),' Please change "https" to "http". The browser security specification can only establish wws links, and ws links will lead to errors.']})}),"\n",(0,o.jsxs)(t.table,{children:[(0,o.jsx)(t.thead,{children:(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.th,{children:"Steps"}),(0,o.jsx)(t.th,{children:"Reference pictures"})]})}),(0,o.jsxs)(t.tbody,{children:[(0,o.jsxs)(t.tr,{children:[(0,o.jsxs)(t.td,{children:[(0,o.jsx)(t.strong,{children:"Step 1"}),": Click to enter the Webscoket debugging webpage and input the service address with the IP information as ",(0,o.jsx)(t.code,{children:"ws://<Sparky's IP>: 10710/getjson"}),". ",(0,o.jsx)(t.strong,{children:"Example"}),": ws://192.168.8.74:10710/getjson"]}),(0,o.jsx)(t.td,{})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsxs)(t.td,{children:[(0,o.jsx)(t.strong,{children:"Step 2"}),": Click ",(0,o.jsx)(t.strong,{children:'"Open Connection"'}),", and the debugging information will be returned after the Sparky connection is successful. Next, check the box 'Receive JSON Decoding'. Now, you can enable the debugging API function on the browser!"]}),(0,o.jsx)(t.td,{})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsxs)(t.td,{children:[(0,o.jsx)(t.strong,{children:"Step 3"}),": Try to send the first instruction to Sparky to get the basic state of Sparky's body!"]}),(0,o.jsx)(t.td,{children:(0,o.jsx)(t.code,{children:'{"cmd":"Get_Status"}'})})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsxs)(t.td,{children:[(0,o.jsx)(t.strong,{children:"Step 4"}),": Copy and paste the above instructions in the Send box and click Send. The message box on the right will return the status information of Sparky."]}),(0,o.jsx)(t.td,{})]})]})]}),"\n",(0,o.jsx)(t.p,{children:"We can try to interpret the meaning of the returned data. The data contains four main parts: battery information, hardware error status, network information, and status information. At present, only the following three parts of valid information are available, and the hardware status has not yet been standardized."}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["Battery information:","\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"Battery capacity: 2340mAh"}),"\n",(0,o.jsx)(t.li,{children:"Quantity of electricity: 87%"}),"\n",(0,o.jsx)(t.li,{children:"Battery percentage: 93.6%"}),"\n",(0,o.jsx)(t.li,{children:"Battery status indicator: discharging"}),"\n",(0,o.jsx)(t.li,{children:"Charging time: 65535"}),"\n",(0,o.jsx)(t.li,{children:"Present current: -1.62A (indicating that the battery is discharging)"}),"\n",(0,o.jsx)(t.li,{children:"Instantaneous power: -11.664W (indicating that the battery is discharging)"}),"\n",(0,o.jsx)(t.li,{children:"Temperature: 36\xb0C"}),"\n",(0,o.jsx)(t.li,{children:"Voltage: 7.2V"}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["Network information:","\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"Client IP address: 192.168.8.155"}),"\n",(0,o.jsx)(t.li,{children:"Device IP address: 192.168.8.232"}),"\n",(0,o.jsx)(t.li,{children:"SSID: test"}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(t.li,{children:'Feedback information: Get status (feedback: "Get_Status" may indicate that this is a status update feedback)'}),"\n"]}),"\n",(0,o.jsx)(t.h3,{id:"52-\u6d4b\u8bd5\u9065\u63a7\u6b65\u6001",children:"5.2 \u6d4b\u8bd5\u9065\u63a7\u6b65\u6001"}),"\n",(0,o.jsxs)(t.admonition,{title:"TAKE CARE",type:"danger",children:[(0,o.jsx)(t.p,{children:"Notes:"}),(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsx)(t.li,{children:"Brake mode and gait movement cause Sparky to enter the unloading force state. At this point, rapidly hold Sparky's waist to avoid damage caused by bumping or falling."}),"\n",(0,o.jsx)(t.li,{children:"Each time after mode switch, you need to send a command to reset the posture of Sparky before using it."}),"\n",(0,o.jsx)(t.li,{children:"The user can use the function of restoring the posture of Sparky's body according to the requirements, so as to adjust Sparky to a stable standing state."}),"\n"]})]}),"\n",(0,o.jsx)(t.p,{children:"After confirming that the robot can connect normally, refer to the following text to enable instruction testing to test whether Sparky can receive and execute instructions."}),"\n",(0,o.jsx)(t.h4,{id:"test-1-switch-modes-and-restore-normal-posture",children:"Test 1: Switch modes and restore normal posture"}),"\n",(0,o.jsxs)(t.p,{children:["Send the code instructions to separately enter ",(0,o.jsx)(t.strong,{children:"Remote Control Mode ->Brake Mode ->Restore Initial Posture"}),". The effect video is as follows."]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'{"cmd":"Mode_Switch","target":"Remote_Control_Mode"}\n{"cmd":"Mode_Switch","target":"Emergency_Stop"}\n{"cmd":"Reset_Robot_Position"} \n'})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'// Switch to Remote Control Mode\n{"cmd":"Mode_Switch","target":"Remote_Control_Mode"}\n// Enter Brake Mode, please hold Sparky\'s body before entering to prevent collision damage due to motor unloading force!!! Experimental function\n{"cmd":"Mode_Switch","target":"Emergency_Stop"}\n/* Restore Initial Posture */\n{"cmd":"Reset_Robot_Position"} \n'})}),"\n",(0,o.jsx)(t.h4,{id:"test-2-test-gait-movement",children:"Test 2: Test gait movement"}),"\n",(0,o.jsx)(t.p,{children:"Before starting the gait test, we first send instructions to ensure that Sparky has entered the Remote Control Mode. Next, please put Sparky on a flat and open ground or table, and we will do the gait test according to the following steps."}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsx)(t.li,{children:"Send the full-speed-ahead instruction and observe Sparky's full-speed-ahead posture. At this time, the record page will pop up with relevant parameter information."}),"\n",(0,o.jsx)(t.li,{children:"Send a stop command to end gait movement."}),"\n",(0,o.jsx)(t.li,{children:"After the test is completed, send an instruction to restore the body posture, so as to ensure that Sparky can safely return to its original posture.\u3002"}),"\n"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'{"cmd":"Mode_Switch","target":"Remote_Control_Mode"}\n{"cmd":"Control_Move","movex":1.0,"movey":0,"movew":0,"moveh":0,"tranx":0,"trany":0,"tranz":0,"roll":0,"pitch":0,"yaw":0,"headpitch":0,"headyaw":0,"speed":"normal"}\n{"cmd":"Control_Move","movex":0,"movey":0,"movew":0,"moveh":0,"tranx":0,"trany":0,"tranz":0,"roll":0,"pitch":0,"yaw":0,"headpitch":0,"headyaw":0,"speed":"normal"}\n{"cmd":"Reset_Robot_Position"} \n'})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'// Switch to Remote Control Mode\n{"cmd":"Mode_Switch","target":"Remote_Control_Mode"}\n// Full speed ahead, put Sparky on a flat and open ground or table before starting!!!\n{"cmd":"Control_Move","movex":1.0,"movey":0,"movew":0,"moveh":0,"tranx":0,"trany":0,"tranz":0,"roll":0,"pitch":0,"yaw":0,"headpitch":0,"headyaw":0,"speed":"normal"}\n// Stop\n{"cmd":"Control_Move","movex":0,"movey":0,"movew":0,"moveh":0,"tranx":0,"trany":0,"tranz":0,"roll":0,"pitch":0,"yaw":0,"headpitch":0,"headyaw":0,"speed":"normal"}\n/* Restore Initial Posture */\n{"cmd":"Reset_Robot_Position"} \n'})}),"\n",(0,o.jsx)(t.h3,{id:"53-record-and-playback",children:"5.3 Record and Playback"}),"\n",(0,o.jsx)(t.p,{children:"Record and Playback is a highlight feature in teaching demonstration mode. Before entering API development, let's first experience how to play recorded action frames."}),"\n",(0,o.jsx)(t.p,{children:"Mode switching and body posture reset are the prerequisite steps for all mode functions. Please make sure to switch to teaching demonstration mode before starting to use."}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'{"cmd":"Mode_Switch","target":"Teach_Mode"}\n\n{"cmd":"Start_Play"} \n\n{"AIA":{"BackLeftLeg":{"x":-58.03042221069336,"y":19.174842834472656,"z":-166.43234252929688},"BackRightLeg":{"x":-64.67723846435547,"y":0.9458351135253906,"z":-164.07229614257813},"FrontLeftLeg":{"x":38.319374084472656,"y":-8.239791870117188,"z":-168.74769592285156},"FrontRightLeg":{"x":54.310855865478516,"y":21.319934844970703,"z":-165.0332794189453},"Head":{"pitch":0.3413107395172119,"yaw":0.0007669925689697266}},"cmd":"Playing","time":3000}\n\n{"cmd":"Stop_Play"}\n\n{"cmd":"Reset_Robot_Position"}\n'})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'// Switch to Teaching Demonstration Mode\n{"cmd":"Mode_Switch","target":"Teach_Mode"}\n/* Action playback */\n// 1\u3001Send action playback command\n{"cmd":"Start_Play"}\n// 2\u3001end all action frames that need to be played. Before starting, please hold Sparky\'s body to prevent collision damage caused by motor unloading force!!!\n// The format difference from recording frames is "feedback": "Recording" replaced with "cmd": "Playing"\n{"AIA":{"BackLeftLeg":{"x":-58.03042221069336,"y":19.174842834472656,"z":-166.43234252929688},"BackRightLeg":{"x":-64.67723846435547,"y":0.9458351135253906,"z":-164.07229614257813},"FrontLeftLeg":{"x":38.319374084472656,"y":-8.239791870117188,"z":-168.74769592285156},"FrontRightLeg":{"x":54.310855865478516,"y":21.319934844970703,"z":-165.0332794189453},"Head":{"pitch":0.3413107395172119,"yaw":0.0007669925689697266}},"cmd":"Playing","time":3000}\n\n// Feedback information will be sent during the playback process, representing the time that has already been played\n// {"feedback":"Recording""time":3000}\n\n// 3. End playback\n// Send this command to stop the timer for action playback  \n{"cmd":"Stop_Play"}\n\n// 4\u3001Restore to standing posture\n{"cmd":"Reset_Robot_Position"}\n'})}),"\n",(0,o.jsx)(t.h3,{id:"54-play-keyframes",children:"5.4 Play Keyframes"}),"\n",(0,o.jsxs)(t.p,{children:["In Edit Mode, you can finely control the playback of actions. This mode uses the body coordinate system, which includes not only limb coordinates but also posture information of the body.",(0,o.jsx)(t.br,{}),"\n","Play a compressed action keyframe together with HENGBOT!"]}),"\n",(0,o.jsxs)(t.admonition,{title:"Take care",type:"danger",children:[(0,o.jsx)(t.p,{children:"Notes:"}),(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsx)(t.li,{children:"Mode switch and body posture reset are the prerequisite steps for all mode functions, and it is necessary to confirm that the mode has been switched to edit mode before starting to use."}),"\n",(0,o.jsx)(t.li,{children:"Any key frames sent in edit mode will be executed immediately."}),"\n"]})]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'\n{"cmd":"Mode_Switch","target":"Edit_Mode"}\n\n{"cmd":"Play_Keyframe","speed":"Fastest","acc":"Fastest","time":10,"Body":{"pitch":0.0,"roll":0.0,"tran_x":0.0,"tran_y":0.0,"tran_z":145.0,"yaw":0.0},"FootPoint":{"FrontLeftLeg":{"x":75.0,"y":48.0,"z":0.0},"FrontRightLeg":{"x":75.0,"y":-48.0,"z":0.0},"BackLeftLeg":{"x":-55.0,"y":48.0,"z":0.0},"BackRightLeg":{"x":-55.0,"y":-48.0,"z":0.0}},"Head":{"pitch":0.0,"yaw":0.0}}\n\n{"cmd":"Reset_Robot_Position"}\n'})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'// Switch to edit mode\n{"cmd":"Mode_Switch","target":"Edit_Mode"}\n/* Keyframe playback */\n// Send compressed keyframes\n{"cmd":"Play_Keyframe","speed":"Fastest","acc":"Fastest","time":10,"Body":{"pitch":0.0,"roll":0.0,"tran_x":0.0,"tran_y":0.0,"tran_z":145.0,"yaw":0.0},"FootPoint":{"FrontLeftLeg":{"x":75.0,"y":48.0,"z":0.0},"FrontRightLeg":{"x":75.0,"y":-48.0,"z":0.0},"BackLeftLeg":{"x":-55.0,"y":48.0,"z":0.0},"BackRightLeg":{"x":-55.0,"y":-48.0,"z":0.0}},"Head":{"pitch":0.0,"yaw":0.0}}\n// Restore to the standing posture\n{"cmd":"Reset_Robot_Position"}\n'})}),"\n",(0,o.jsx)(t.h3,{id:"55-handling-method-of-abnormal-situation",children:"5.5 Handling method of abnormal situation"}),"\n",(0,o.jsx)(t.p,{children:"Q: The command has been sent, but Sparky's body doesn't respond."}),"\n",(0,o.jsx)(t.p,{children:"A: Need to send instructions in one of Remote Control Mode, Edit Mode, Teaching Demonstration Mode, please check it before sending instructions."}),"\n",(0,o.jsx)(t.p,{children:"Q: Python has finished the process, but the process in Sparky continues."}),"\n",(0,o.jsx)(t.p,{children:"A: After Python stops, you need to switch to any mode in the browser to stop this process."}),"\n",(0,o.jsx)(t.p,{children:"Q: After the browser message page finishes the process, a large amount of data appears, which causes Sparky to run slowly."}),"\n",(0,o.jsx)(t.p,{children:"A: The data volume is too large, which leads to a slow situation. Refresh the web page on the browser side."}),"\n",(0,o.jsx)(t.h2,{id:"vimore-api-development-materials",children:"VI.More API development materials"}),"\n",(0,o.jsx)(t.p,{children:'"Here is the detailed information about API for developers who need it. We don\'t go into the details of technical terms and their usage. For users without programming background, we recommend using the browser debugging method mentioned above to get a better experience."'}),"\n",(0,o.jsx)(t.h3,{id:"61-mode-switching-and-body-posture-reset",children:"6.1 Mode switching and body posture reset"}),"\n",(0,o.jsx)(t.p,{children:"There are five related modes for Sparky: Remote Control Mode, Teaching Demonstration Mode, Edit Mode, Brake Mode, and Freedom Mode. Among them, Remote Control Mode, Teaching Demonstration Mode, Edit Mode, and Brake Mode have already been available in the APP, while the Freedom Mode has not been available yet because its behavior process has not been determined."}),"\n",(0,o.jsxs)(t.admonition,{title:"TAKE CARE",type:"danger",children:[(0,o.jsx)(t.p,{children:"Notes:"}),(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsx)(t.li,{children:"Brake mode and gait movement cause Sparky to enter the unloading force state. At this point, rapidly hold Sparky's waist to avoid damage caused by bumping or falling."}),"\n",(0,o.jsx)(t.li,{children:"Each time after mode switch, you need to send a command to reset the posture of Sparky before using it."}),"\n",(0,o.jsx)(t.li,{children:"The user can use the function of restoring the posture of Sparky's body according to the requirements, so as to adjust Sparky to a stable standing state."}),"\n"]})]}),"\n",(0,o.jsx)(t.h4,{id:"611-\u6a21\u5f0f\u5207\u6362\u6307\u4ee4\u8868",children:"6.1.1 \u6a21\u5f0f\u5207\u6362\u6307\u4ee4\u8868"}),"\n",(0,o.jsx)(t.p,{children:"\u53ef\u6839\u636e\u4e0b\u6587\u6307\u4ee4\u6765\u81ea\u7531\u5207\u6362\u5f53\u4e0b\u673a\u5668\u72d7\u7684\u6a21\u5f0f\u53ca\u6062\u590d\u673a\u8eab\u59ff\u6001\u3002"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'{"cmd":"Mode_Switch","target":"Remote_Control_Mode"}\n\n{"cmd":"Mode_Switch","target":"Teach_Mode"}\n\n{"cmd":"Mode_Switch","target":"Edit_Mode"}\n\n{"cmd":"Mode_Switch","target":"Emergency_Stop"}\n\n{"cmd":"Mode_Switch","target":"Free_Mode"}\n\n{"cmd":"Reset_Robot_Position"} \n'})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'/* Mode switching related commands */\n// Switch to remote control mode\n{"cmd":"Mode_Switch","target":"Remote_Control_Mode"}\n// Switch to teaching demonstration mode\n{"cmd":"Mode_Switch","target":"Teach_Mode"}\n// Switch to edit mode\n{"cmd":"Mode_Switch","target":"Edit_Mode"}\n// Enter brake mode\n{"cmd":"Mode_Switch","target":"Emergency_Stop"}\n// Enter freedom mode (Functions not determined)\n{"cmd":"Mode_Switch","target":"Free_Mode"}\n\n/* Restore the body posture */\n{"cmd":"Reset_Robot_Position"} \n'})}),"\n",(0,o.jsx)(t.h4,{id:"612-usage-description-of-mode-order",children:"6.1.2 Usage description of mode order"}),"\n",(0,o.jsx)(t.p,{children:"The instruction interaction process for mode switching is all the same. Taking entering remote control mode as an example, the following are all the instructions required during the process."}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'{"cmd":"Mode_Switch","target":"Remote_Control_Mode"}\n\n{"cmd":"Mode_Switch","target":"Emergency_Stop"}\n\n{"cmd":"Reset_Robot_Position"}\n'})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'// 1\u3001Send the command to switch to remote control mode\n{"cmd":"Mode_Switch","target":"Remote_Control_Mode"}\n\n// *  The robot side will reply to the received instructions (Hereinafter not repeated)\n// < {"cmd":"Mode_Switch","target":"Remote_Control_Mode"}\n\n// Before entering Brake Mode, please hold Sparky\'s body to prevent collision damage caused by motor unloading force!!!\n{"cmd":"Mode_Switch","target":"Emergency_Stop"}\n\n// 2\u3001Reset the body posture\n{"cmd":"Reset_Robot_Position"}\n'})}),"\n",(0,o.jsx)(t.h3,{id:"62-\u9065\u63a7\u6a21\u5f0f",children:"6.2 \u9065\u63a7\u6a21\u5f0f"}),"\n",(0,o.jsxs)(t.admonition,{title:"TAKE CARE",type:"danger",children:[(0,o.jsx)(t.p,{children:"Prerequisite: Before executing this section, it is necessary to switch modes (Section 6.1) and confirm that it is in remote control mode."}),(0,o.jsx)(t.p,{children:"The torque output of the motor in remote control mode is automatically controlled by the program, so functions such as walking remote control and fast action recording are relatively special in the current mode."})]}),"\n",(0,o.jsx)(t.h4,{id:"621--walking-remote-control",children:"6.2.1  Walking remote control"}),"\n",(0,o.jsx)(t.p,{children:"Walking remote control is composed of a single multi-parameter instruction, and the meanings of different fields are roughly as follows:"}),"\n",(0,o.jsxs)(t.table,{children:[(0,o.jsx)(t.thead,{children:(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.th,{children:"Name"}),(0,o.jsx)(t.th,{children:"Function"})]})}),(0,o.jsxs)(t.tbody,{children:[(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"move"}),(0,o.jsx)(t.td,{children:"Used to control the position changes of the body"})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"movex"}),(0,o.jsx)(t.td,{children:"Control forward and backward movement"})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"movey"}),(0,o.jsx)(t.td,{children:"Control left and right movement"})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"movew"}),(0,o.jsx)(t.td,{children:"Control in-situ rotation"})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"tran"}),(0,o.jsx)(t.td,{children:"Used to control body displacement, the position of the four feet remains unchanged and only the center of gravity is changed."})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"roll\u3001pitch\u3001yaw"}),(0,o.jsx)(t.td,{children:"Used to control the posture of the body"})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"headpitch\u3001headyaw"}),(0,o.jsx)(t.td,{children:"Specially control the pitch and yaw of the head."})]}),(0,o.jsxs)(t.tr,{children:[(0,o.jsx)(t.td,{children:"speed"}),(0,o.jsx)(t.td,{children:"Configure the step frequency. It does not affect the speed at present."})]})]})]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'{"cmd":"Control_Move","movex":1.0,"movey":0,"movew":0,"moveh":0,"tranx":0,"trany":0,"tranz":0,"roll":0,"pitch":0,"yaw":0,"headpitch":0,"headyaw":0,"speed":"normal"}\n\n{"cmd":"Control_Move","movex":-1.0,"movey":0,"movew":0,"moveh":0,"tranx":0,"trany":0,"tranz":0,"roll":0,"pitch":0,"yaw":0,"headpitch":0,"headyaw":0,"speed":"normal"}\n\n{"cmd":"Control_Move","movex":0,"movey":0,"movew":0,"moveh":0,"tranx":0,"trany":0,"tranz":0,"roll":0,"pitch":0,"yaw":0,"headpitch":0,"headyaw":0,"speed":"normal"}\n'})}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsx)(t.p,{children:"The following instructions contain comments and some instructions that have not been compressed by json. Please read the comments before using them."}),"\n"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'/* Uncompressed remote control instruction */\n/* All the valid ranges of numerical values are -1 ~ 1 */\n{\n    "cmd": "Control_Move",\n    "movex": 0.2, // \n    "movey": 0,\n    "movew": 0, // Angular velocity (rad/s) of counterclockwise motion around Z axis. In-situ rotation (currently not available)\n    "moveh": 0, //The default value of reserved characters is 0 [February 26th]\n    "tranx": 0, // The offset of the body on the X-axis,in the forward and backward directions.\n    "trany": 0, // \n    "tranz": 0, //Values between -1 and 1 represent the offset of body height (-35 ~ 35 mm)\n    /* Body posture relative to the initial position */\n    "roll": 0,\n    "pitch": 0,\n    "yaw": 0,\n    /* Head posture relative to the initial position */ \n    "headpitch": 0,\n    "headyaw": 0,\n    /* Speed setting */\n    "speed":"fast" //Speed configuration in walking state. The other value is \u201cnormal\u201d\n\n/* Compressed command */\n// Full speed ahead\n{"cmd":"Control_Move","movex":1.0,"movey":0,"movew":0,"moveh":0,"tranx":0,"trany":0,"tranz":0,"roll":0,"pitch":0,"yaw":0,"headpitch":0,"headyaw":0,"speed":"normal"}\n// Full astern\n{"cmd":"Control_Move","movex":-1.0,"movey":0,"movew":0,"moveh":0,"tranx":0,"trany":0,"tranz":0,"roll":0,"pitch":0,"yaw":0,"headpitch":0,"headyaw":0,"speed":"normal"}\n// Stop\n{"cmd":"Control_Move","movex":0,"movey":0,"movew":0,"moveh":0,"tranx":0,"trany":0,"tranz":0,"roll":0,"pitch":0,"yaw":0,"headpitch":0,"headyaw":0,"speed":"normal"}\n'})}),"\n",(0,o.jsx)(t.h4,{id:"622-quick-action-recording",children:"6.2.2 Quick Action Recording"}),"\n",(0,o.jsx)(t.p,{children:"The torque of the motor in walking mode is automatically controlled by the program. Rapid recording may cause the robot to completely unload force. It is important to grab the robot before starting recording to avoid damage caused by bumping or falling."}),"\n",(0,o.jsx)(t.p,{children:"Commands during rapid recording process:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'{"cmd":"Start_Record"}\n\n{"cmd":"Stop_Record"}\n\n{"cmd":"Reset_Robot_Position"}\n'})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'// 1\u3001Start recording\n{"cmd":"Start_Record"}\n\n// *Note: the torsion output of the robot\'s limbs will be turned off, so be sure to hold the robot before starting rapid recording.\n// *After receiving the data, the robot will send back the data of foot coordinates and head posture.\n// See the table below for the returned data format.\n\n// 2\u3001End the recording\n// *After the recording ends, the torque output will be turned on, and the robot will maintain its current posture\n{"cmd":"Stop_Record"}\n\n// 3\u3001Restore to standing posture\n{"cmd":"Reset_Robot_Position"}\n'})}),"\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.strong,{children:"Feedback data"}),": The robot does not store recorded data and users need to store it themselves for playback purposes. The data is transmitted using the hip joint coordinate system, which is only related to the installation position of the legs and not to the position of the body. Time represents the time elapsed from the start of recording to the current frame, and is used for timing synchronization during playback."]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'/*  Compressed data */\n{"AIA":{"BackLeftLeg":{"x":-58.03042221069336,"y":19.174842834472656,"z":-166.43234252929688},"BackRightLeg":{"x":-64.67723846435547,"y":0.9458351135253906,"z":-164.07229614257813},"FrontLeftLeg":{"x":38.319374084472656,"y":-8.239791870117188,"z":-168.74769592285156},"FrontRightLeg":{"x":54.310855865478516,"y":21.319934844970703,"z":-165.0332794189453},"Head":{"pitch":0.3413107395172119,"yaw":0.0007669925689697266}},"feedback":"Recording","time":2359}\n\n/* Decompressed data */\n{\n  "AIA":{\n    "BackLeftLeg":{\n      "x":-58.03042221069336,\n      "y":19.174842834472656,\n      "z":-166.43234252929688\n    },\n    "BackRightLeg":{\n      "x":-64.67723846435547,\n      "y":0.9458351135253906,\n      "z":-164.07229614257812\n    },\n    "FrontLeftLeg":{\n      "x":38.319374084472656,\n      "y":-8.239791870117188,\n      "z":-168.74769592285156\n    },\n    "FrontRightLeg":{\n      "x":54.310855865478516,\n      "y":21.319934844970703,\n      "z":-165.0332794189453\n    },\n    "Head":{\n      "pitch":0.3413107395172119,\n      "yaw":0.0007669925689697266\n    }\n  },\n  "feedback":"Recording",\n  "time":2359\n}\n'})}),"\n",(0,o.jsx)(t.h3,{id:"63-teaching-demonstration-mode",children:"6.3 Teaching demonstration mode"}),"\n",(0,o.jsxs)(t.admonition,{title:"TAKE CARE",type:"danger",children:[(0,o.jsx)(t.p,{children:"Mode (section 6.1) switch and body posture reset are the prerequisite steps for all mode functions, and it is necessary to confirm that the mode has been switched to teaching demonstration mode before starting to use."}),(0,o.jsx)(t.p,{children:"In teaching demonstration mode, users can interfere with the torque output of the motor, and recording in this mode allows for a small amount of torque output, which is used to finely control the posture."})]}),"\n",(0,o.jsx)(t.h4,{id:"631-command-listmotor-torque-configuration",children:"6.3.1 Command list/motor torque configuration"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'{"cmd":"Get_Parameter","parameter":"Output_Torque","type":"AIA_ALL"}\n\n{"cmd":"Set_Parameter","type":"AIA_Head","parameter":"Output_Torque","value":"Enable"} \n{"cmd":"Set_Parameter","type":"AIA_Head","parameter":"Output_Torque","value":"Disable"} \n\n{"cmd":"Set_Parameter","type":"AIA_Head","parameter":"Output_Torque","value":"Limit"}   \n\n{"cmd":"Set_Parameter","type":"AIA_Head","parameter":"Output_Torque","value":"UnLimit"} \n\n{"cmd":"Set_Parameter","type":"AIA_Head","parameter":"Output_Torque","value":"Limit"}\n{"cmd":"Set_Parameter","type":"AIA_FrontLeft","parameter":"Output_Torque","value":"Limit"}\n{"cmd":"Set_Parameter","type":"AIA_FrontRight","parameter":"Output_Torque","value":"Limit"}\n{"cmd":"Set_Parameter","type":"AIA_BackLeft","parameter":"Output_Torque","value":"Limit"}\n{"cmd":"Set_Parameter","type":"AIA_BackRight","parameter":"Output_Torque","value":"Limit"}\n\n{"cmd":"Set_Parameter","type":"AIA_ALL","parameter":"Output_Torque","value":"Limit"}\n\n{"cmd":"Start_Record"}\n\n{"cmd":"Stop_Record"}\n\n{"cmd":"Reset_Robot_Position"}\n'})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'/* Obtain the torque output configuration of the motor */\n{"cmd":"Get_Parameter","parameter":"Output_Torque","type":"AIA_ALL"}\n\n/* Set motor torque output */\n// Attention: Before performing fine control of motor torque, it is necessary to confirm that the mode is not in remote control mode, otherwise the torque output will not take effect\n// Five configurable actuators (limbs and head) AIA_Head, AIA_FrontLeft, AIA_FrontRight, AIA_BackLeft and AIA_BackRight.\n// Configurable parameters Enable/Disable Limit/UnLimit.\n// * Enable and Disable can switch each other. Limit and UnLimit only takes effect under Enable.\n{"cmd":"Set_Parameter","type":"AIA_Head","parameter":"Output_Torque","value":"Enable"} \n{"cmd":"Set_Parameter","type":"AIA_Head","parameter":"Output_Torque","value":"Disable"} // Remote control mode: the default strategy of rapid recording mode (completely disabled)\n{"cmd":"Set_Parameter","type":"AIA_Head","parameter":"Output_Torque","value":"Limit"}   // The strategy of recording in teaching demonstration mode\n{"cmd":"Set_Parameter","type":"AIA_Head","parameter":"Output_Torque","value":"UnLimit"} // The strategy of recording in teaching demonstration mode  \n\n/* Action recording */\n// (Optional) 1. Configure the motor torque strategy [two ways]\n// 1.a It is recommended to use the Limit mode to experience the recording in the teaching demonstration mode [configure each limb independently].\n{"cmd":"Set_Parameter","type":"AIA_Head","parameter":"Output_Torque","value":"Limit"}\n{"cmd":"Set_Parameter","type":"AIA_FrontLeft","parameter":"Output_Torque","value":"Limit"}\n{"cmd":"Set_Parameter","type":"AIA_FrontRight","parameter":"Output_Torque","value":"Limit"}\n{"cmd":"Set_Parameter","type":"AIA_BackLeft","parameter":"Output_Torque","value":"Limit"}\n{"cmd":"Set_Parameter","type":"AIA_BackRight","parameter":"Output_Torque","value":"Limit"}\n// 1.B \u540c\u65f6\u914d\u7f6e\u6240\u6709\u7535\u673a[\u6240\u6709\u914d\u7f6e]\n{"cmd":"Set_Parameter","type":"AIA_ALL","parameter":"Output_Torque","value":"Limit"}\n\n// 2.Start recording\n// *Note: After recording in teaching demonstration mode, the motor will output a small amount of torque, which is used to adjust the posture.\n// *After receiving the data, the robot will send back the data of foot coordinates and head posture.\n// The returned data format is consistent with the fast action recording.\n{"cmd":"Start_Record"}\n\n// 3.End the recording\n// *Torsion output will increase after recording\n{"cmd":"Stop_Record"}\n\n// 4. Return to the standing posture\n{"cmd":"Reset_Robot_Position"}\n'})}),"\n",(0,o.jsx)(t.h4,{id:"632-action-playback",children:"6.3.2 Action playback"}),"\n",(0,o.jsx)(t.p,{children:"Action playback involves the serialization and deserialization of data, so it is not recommended for users to use API directly."}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.strong,{children:"Playback process"})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'{"cmd":"Start_Play"}\n\n{"AIA":{"BackLeftLeg":{"x":-58.03042221069336,"y":19.174842834472656,"z":-166.43234252929688},"BackRightLeg":{"x":-64.67723846435547,"y":0.9458351135253906,"z":-164.07229614257813},"FrontLeftLeg":{"x":38.319374084472656,"y":-8.239791870117188,"z":-168.74769592285156},"FrontRightLeg":{"x":54.310855865478516,"y":21.319934844970703,"z":-165.0332794189453},"Head":{"pitch":0.3413107395172119,"yaw":0.0007669925689697266}},"cmd":"Playing","time":3000}\n\n{"cmd":"Stop_Play"}\n\n{"cmd":"Reset_Robot_Position"}\n'})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'/* Action playback */\n// 1. Send an action play command.\n{"cmd":"Start_Play"}\n// 2. Send all action frames that need to be played.\n// The format difference with the recorded frame is that "feedback": "Recording" is replaced by "cmd": "Playing".\n{"AIA":{"BackLeftLeg":{"x":-58.03042221069336,"y":19.174842834472656,"z":-166.43234252929688},"BackRightLeg":{"x":-64.67723846435547,"y":0.9458351135253906,"z":-164.07229614257813},"FrontLeftLeg":{"x":38.319374084472656,"y":-8.239791870117188,"z":-168.74769592285156},"FrontRightLeg":{"x":54.310855865478516,"y":21.319934844970703,"z":-165.0332794189453},"Head":{"pitch":0.3413107395172119,"yaw":0.0007669925689697266}},"cmd":"Playing","time":3000}\n\n// Feedback information will be sent during the playback process, representing the time that has already been played.\n// {"feedback":"Recording""time":3000}\n\n// 3. End playback\n// Send this command to stop the timer for action playback\n{"cmd":"Stop_Play"}\n\n// 4. Restore to standing posture\n{"cmd":"Reset_Robot_Position"}\n'})}),"\n",(0,o.jsx)(t.h3,{id:"64-edit-mode",children:"6.4 Edit mode"}),"\n",(0,o.jsxs)(t.admonition,{title:"TAKE CARE",type:"danger",children:[(0,o.jsx)(t.p,{children:"Notes:"}),(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsx)(t.li,{children:"Mode switch and body posture reset are the prerequisite steps for all mode functions, and it is necessary to confirm that the mode has been switched to edit mode before starting to use."}),"\n",(0,o.jsx)(t.li,{children:"Any key frames sent in edit mode will be executed immediately."}),"\n"]})]}),"\n",(0,o.jsx)(t.h4,{id:"641-keyframe-example",children:"6.4.1 Keyframe Example\u200b"}),"\n",(0,o.jsx)(t.p,{children:'The "time" attribute in keyframes represents the duration of the frame, which is different from the meaning of action sets.'}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'/* Keyframe content*/\n    {\n        "cmd": "Play_Keyframe",\n        "speed": "Fastest",\n        "acc": "Fastest", // Fastest, Fast, Slow, Slowest corresponding to four speed and acceleration configuration options.\n        "time": 10,//The duration of the current frame (ms)\n        "Body": {\n            "pitch": 0.0,//Using the radian system, ranging from -1 to 1\n            "roll": 0.0,//Using the radian system, ranging from -1 to 1\n            "tran_x": 0.0,\n            "tran_y": 0.0,\n            "tran_z": 141.0, //It is recommended to use 145mm as the standing height for the new body\n            "yaw": 0.0\n        },\n        "FootPoint": { //he world coordinates of the foot endpoints in the initial state can be considered that all four foot endpoints are located on the ground at this time.\n            "FrontLeftLeg": {\n                "x": 75.0,\n                "y": 48.0,\n                "z": 0.0\n            },\n            "FrontRightLeg": {\n                "x": 75.0,\n                "y": -48.0,\n                "z": 0.0\n            },\n            "BackLeftLeg": {\n                "x": -55.0,\n                "y": 48.0,\n                "z": 0.0 \n            },\n            "BackRightLeg": {\n                "x": -55.0,\n                "y": -48.0,\n                "z": 0.0\n            }\n            \n        },\n        "Head": {\n                "pitch": 0.0,//Using the radian system, ranging from -1 to 1\n                "yaw": 0.0//Using the radian system, ranging from -1 to 1\n        }\n    }\n'})}),"\n",(0,o.jsx)(t.h4,{id:"642-play-keyframes",children:"6.4.2 Play keyframes"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'\n{"cmd":"Play_Keyframe","speed":"Fastest","acc":"Fastest","time":10,"Body":{"pitch":0.0,"roll":0.0,"tran_x":0.0,"tran_y":0.0,"tran_z":145.0,"yaw":0.0},"FootPoint":{"FrontLeftLeg":{"x":75.0,"y":48.0,"z":0.0},"FrontRightLeg":{"x":75.0,"y":-48.0,"z":0.0},"BackLeftLeg":{"x":-55.0,"y":48.0,"z":0.0},"BackRightLeg":{"x":-55.0,"y":-48.0,"z":0.0}},"Head":{"pitch":0.0,"yaw":0.0}}\n\n{"cmd":"Reset_Robot_Position"}\n'})}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-json",children:'/* Keyframe playback */\n// Send compressed keyframes\n{"cmd":"Play_Keyframe","speed":"Fastest","acc":"Fastest","time":10,"Body":{"pitch":0.0,"roll":0.0,"tran_x":0.0,"tran_y":0.0,"tran_z":145.0,"yaw":0.0},"FootPoint":{"FrontLeftLeg":{"x":75.0,"y":48.0,"z":0.0},"FrontRightLeg":{"x":75.0,"y":-48.0,"z":0.0},"BackLeftLeg":{"x":-55.0,"y":48.0,"z":0.0},"BackRightLeg":{"x":-55.0,"y":-48.0,"z":0.0}},"Head":{"pitch":0.0,"yaw":0.0}}\n//Restore to standing posture\n{"cmd":"Reset_Robot_Position"}\n'})}),"\n",(0,o.jsx)(t.h3,{id:"65-using-python-to-control-robot-motion",children:"6.5 Using Python to Control Robot Motion"}),"\n",(0,o.jsx)(t.admonition,{title:"USER TIPS",type:"tip",children:(0,o.jsx)(t.p,{children:"The following program needs to be adjusted according to the user's actual usage environment and robot IP, and this is not a public release version."})}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.strong,{children:"Note"}),": The Python environment is already installed by default. Please refer to the following command to install the relevant dependency packages."]}),"\n"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-python",children:"# Partial dependency package\npip install numpy websockets websocket-client opencv-python pillow matplotlib -i https://pypi.tuna.tsinghua.edu.cn/simple\n"})}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsxs)(t.p,{children:["Using Python to control robot motion, source code:\uff1a",(0,o.jsx)(t.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(7645).A+"",children:"controi_UI.py"})]}),"\n"]}),"\n",(0,o.jsx)(t.h3,{id:"jupyter-notebook-test",children:"Jupyter notebook test"}),"\n",(0,o.jsxs)(t.p,{children:["We have tested that Jupyter Notebook can be used normally under Windows/linux. The following connection is the ",(0,o.jsx)(t.code,{children:"ipynb"})," package for remote control function test."]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(3647).A+"",children:"Remote control test"})}),"\n",(0,o.jsx)(t.h3,{id:"66-graphical-gui-controls-the-motion-of-sparky-in-various-dimensions",children:"6.6 Graphical GUI controls the motion of Sparky in various dimensions."}),"\n",(0,o.jsxs)(t.p,{children:["Source code\uff1a",(0,o.jsx)(t.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(3506).A+"",children:"keyDrame_UI.py"})]}),"\n",(0,o.jsx)(t.h3,{id:"67-graphicgui-recording-and-playing-actions",children:"6.7 Graphic\xa0GUI recording and playing actions"}),"\n",(0,o.jsxs)(t.p,{children:["Source code\uff1a",(0,o.jsx)(t.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(6031).A+"",children:"record_UI.py"})]}),"\n",(0,o.jsx)(t.h3,{id:"68-visualize-and-generate-waveform-curves-to-control-the-rhythmic-movement-of-sparky-in-all-degrees-of-freedom",children:"6.8 Visualize and generate waveform curves to control the rhythmic movement of Sparky in all degrees of freedom."}),"\n",(0,o.jsxs)(t.p,{children:["Source code\uff1a",(0,o.jsx)(t.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(3641).A+"",children:"wave_control_GUI.py"})]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.strong,{children:"Websocket can run on both remote and local sides"})}),"\n",(0,o.jsx)(t.admonition,{title:"USER TIPS",type:"tip",children:(0,o.jsx)(t.p,{children:"When Sparky runs websocket locally (such as 831/X3), the IP address needs to be changed to 127.0.0.1."})}),"\n",(0,o.jsx)(t.h3,{id:"66-mjpeg-video-transmission",children:"6.6 MJPEG Video Transmission"}),"\n",(0,o.jsx)(t.p,{children:"Users can run it directly in the browser and experience the scenery from the perspective of Sparky together."}),"\n",(0,o.jsxs)(t.blockquote,{children:["\n",(0,o.jsxs)(t.p,{children:[(0,o.jsx)(t.code,{children:"Example: http://<Sparky IP>:8080"})," ",(0,o.jsx)(t.a,{href:"http://192.168.8.232:8080",children:"http://192.168.8.232:8080"})]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},3641:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/files/240623_wave_control_GUI-507ca7ce68c4cb07f1e67a2b84a0effa.py"},7645:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/files/controlui-78b6c2ee9bcb735ded675cc4cc6ddbd8.py"},3506:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/files/keyFrameUI-c119f237ae65be14099951a32c9fe995.py"},3647:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/files/key_test-89cedab6a2560a71ccfc90cb9204f0bd.ipynb"},6031:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/files/recordUI-93a7f10dcbd8f6e2fccb72920fd7e37f.py"},8656:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/api_head-a44e6d4071b9e5d2270995202f5257c0.jpg"},8425:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/api_move-27d995984d4cf3f2178ac957d3a51995.jpg"},3601:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/sparky-096ae94b3d25f8e00d8a6aff73319ed5.jpg"},8453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>s});var o=n(6540);const r={},i=o.createContext(r);function a(e){const t=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),o.createElement(i.Provider,{value:t},e.children)}}}]);